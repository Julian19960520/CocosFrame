{"version":3,"sources":["MainMenuScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/TypeScript/SceneScript","sourcesContent":["import Scene from \"../System/Scene\";\n\n// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\nimport SceneManager from \"../System/SceneManager\"\nimport PanelManager from \"../System/PanelManager\"\nimport { DB } from \"../System/DataBind\";\nimport MessageBox from \"./MessageBox\";\nimport {Util} from \"../System/Util\";\nimport Top from \"../System/Top\";\nimport Moon from \"../Game/Moon\";\n@ccclass\nexport default class MainMenuScene extends Scene {\n    @property(cc.Button)\n    optionButton: cc.Button = null;\n    @property(cc.Button)\n    rankButton: cc.Button = null;\n    @property(cc.Button)\n    wikiButton: cc.Button = null;\n\n    @property(cc.Node)\n    zoomNode: cc.Node = null;\n    @property(cc.Node)\n    startMapNode: cc.Node = null;\n    @property(cc.Node)\n    titleNode: cc.Label = null;\n    @property(cc.Node)\n    cascadeOpacity:cc.Node = null;\n    @property(cc.Node)\n    noOpacity:cc.Node = null;\n     \n    @property(cc.Button)\n    zoomOutBtn: cc.Button = null;\n    @property(cc.Button)\n    startBtn: cc.Button = null;\n    @property(cc.Graphics)\n    graphics: cc.Graphics = null;\n\n\n    private lastPos = null;\n    private starNode = null;\n    private moonNode = null;\n    onLoad () {\n        this.Bind(\"archives\",(archives:any[])=>{\n            if(!archives && archives.length == 0){\n                return;\n            }\n            console.log(JSON.stringify(archives));\n            this.instantPrefab(\"archive\",(prefab)=>{\n                for(let i=0; i<archives.length;i++){\n                    let archive = archives[i];\n                    var newNode:cc.Node = cc.instantiate(prefab);\n                    newNode.name = archive.name;\n                    newNode.position = cc.v2(archive.x, archive.y);\n                    newNode.getComponentInChildren(cc.Animation).play(\"ZoomIn\");\n                    newNode.on(\"click\", this.onClickArchive, this)\n                    this.cascadeOpacity.addChild(newNode);\n                }\n            })\n            this.zoomOutBtn.node.getComponentInChildren(cc.Animation).play(\"ZoomOut\");\n        })\n        this.optionButton.node.on(\"click\",()=>{\n            \n        })\n        this.rankButton.node.on(\"click\",()=>{\n            \n        })\n        this.wikiButton.node.on(\"click\",()=>{\n            \n        })\n        this.zoomOutBtn.node.on(\"click\",()=>{\n            this.zoomOut();\n        })\n        this.startBtn.node.on(\"click\", this.onStartBtnTap, this)\n        this.zoomOutBtn.node.active = false;\n        this.startBtn.node.active = false;\n    }\n    private onClickArchive(e:cc.Event){\n        this.zoomIn(e.target);\n    }\n    private zoomIn(node:cc.Node){\n        this.cascadeOpacity.pauseSystemEvents(true);\n        let pos:any = node.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        pos = this.zoomNode.convertToNodeSpace(pos);\n        Util.setAnchor(this.zoomNode, pos.x/640, pos.y/1136);\n        this.lastPos = this.zoomNode.position;\n        this.noOpacity.position = cc.Vec2.ZERO;\n        cc.tween(this.zoomNode).to(1, {scale:100, position:cc.Vec2.ZERO}, { easing: 'circIn'}).start();\n        cc.tween(this.cascadeOpacity).to(1, {opacity:0}).hide().start();\n        cc.tween(this.titleNode).to(1, {position:cc.v2(0, 640)}).call(()=>{\n            this.zoomOutBtn.node.active = true;\n            this.startBtn.node.active = true;\n        }).start();\n        this.initStartMap();\n        cc.tween(this.startMapNode).show().set({opacity:0}).to(1, {opacity:255}).start();\n    }\n    private zoomOut(){\n        this.cascadeOpacity.resumeSystemEvents(true);\n        this.zoomOutBtn.node.active = false;\n        this.startBtn.node.active = false;\n        cc.tween(this.zoomNode).to(1, {scale:1, position:this.lastPos}, { easing: 'circOut'}).start();\n        cc.tween(this.cascadeOpacity).show().to(1, {opacity:255}).start();\n        cc.tween(this.titleNode).to(1, {position:cc.v2(0, 300)}).start();\n        cc.tween(this.startMapNode).to(1, {opacity:0}).hide().start();\n    }\n    private initStartMap(){\n        this.startMapNode.removeAllChildren();\n        let starMap = DB.Get(\"starMap\");\n        let stars:{x,y,id}[] = starMap.stars;\n        let links:number[][] = starMap.links;\n        let curStarId:number = starMap.curStarId;\n        this.instantPrefab(\"star\",(prefab)=>{\n            let map = new Map<number,cc.Node>();\n            for(let i=0; i<stars.length;i++){\n                let star = stars[i];\n                var newNode:cc.Node = cc.instantiate(prefab);\n                newNode.position = cc.v2(star.x, star.y);\n                newNode.name = \"star\"+star.id;\n                newNode.getComponentInChildren(cc.Label).string = star.id;\n                map.set(star.id, newNode);\n                this.startMapNode.addChild(newNode);\n                newNode.on(\"click\", this.onStarTap, this, false);\n            }\n            let graphics = this.startMapNode.getComponent(cc.Graphics);\n            graphics.lineWidth = 3;\n            for(let i=0; i<links.length;i++){\n                let link = links[i];\n                let node0 = map.get(link[0]);\n                let node1 = map.get(link[1]);\n                graphics.moveTo(node0.position.x, node0.position.y);\n                graphics.lineTo(node1.position.x, node1.position.y);\n                graphics.stroke();\n            }\n            this.instantPrefab(\"moon\",(prefab)=>{\n                var newNode:cc.Node = cc.instantiate(prefab);\n                this.startMapNode.addChild(newNode);\n                this.moonNode = newNode;\n                this.setStar(map.get(curStarId));\n            });\n        })\n    }\n    private onStarTap(e:cc.Event){\n        this.setStar(e.target);\n    }\n    private setStar(starNode:cc.Node){\n        if(this.starNode != starNode){\n            console.log(starNode);\n            this.starNode = starNode;\n            this.moonNode.position = cc.v2(starNode.position.x+50, starNode.position.y);\n            this.moonNode.getComponent(Moon).RotatAround(starNode);\n            let motion = this.moonNode.getComponent(cc.MotionStreak);\n            cc.tween(motion).set({fadeTime:0}).to(1, {fadeTime:1}).start();\n        }\n    }\n    private onStartBtnTap(){\n        SceneManager.ins.Enter(\"GameScene\");\n    }\n}\n"]}