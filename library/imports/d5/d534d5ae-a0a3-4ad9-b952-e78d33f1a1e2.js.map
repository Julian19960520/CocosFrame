{"version":3,"sources":["../../../../../assets/TypeScript/Frame/assets/TypeScript/Frame/SceneManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/TypeScript/Frame","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\nimport Scene from \"./Scene\";\nimport { DB } from \"./DataBind\";\nimport ScreenRect from \"./ScreenRect\";\n@ccclass\nexport default class SceneManager extends cc.Component {\n    stack:string[] = [];\n    curScene:Scene = null;\n    static ins:SceneManager = null;\n    @property\n    firstScene:string = \"\";\n    @property\n    homeScene:string = \"\";\n    @property(cc.Node)\n    content:cc.Node = null;\n    @property(cc.BlockInputEvents)\n    blockInput:cc.BlockInputEvents = null;\n\n    onLoad(){\n        SceneManager.ins = this;\n        this.Enter(this.firstScene, ShiftAnima.simpleShift);\n        this.blockInput.node.active = false;\n    }\n    //进入新场景\n    public Enter(sceneName:string, shiftAnima = ShiftAnima.moveLeftShift){\n        this.blockInput.node.active = true;\n        this.stack.push(sceneName);\n        return this.shiftScene(sceneName, shiftAnima);\n    }\n    //回到上个场景\n    public Back(shiftAnima = ShiftAnima.moveRightShift){\n        this.blockInput.node.active = true;\n        return new Promise((resolve, reject)=>{\n            if(this.stack.length >= 2){\n                this.stack.pop();\n                this.shiftScene(this.stack[this.stack.length-1], shiftAnima).then(resolve).catch(reject);\n            }else{\n                console.log(\"前面没有场景了\");\n                reject();\n                this.blockInput.node.active = false;\n            }\n        })\n    }\n    //回到Home场景，并检查返回路径上的场景是否需要销毁\n    public goHome(shiftAnima = ShiftAnima.moveRightShift){\n        this.blockInput.node.active = true;\n        return new Promise((resolve, reject)=>{\n            if(this.homeScene == this.curScene.node.name){\n                resolve(this.curScene)\n                this.blockInput.node.active = false;\n                return;\n            }\n            //先弹出当前场景，但不销毁\n            this.stack.pop();\n            //检查并销毁路径上的场景\n            let sceneName;\n            while(this.stack.length > 0 \n                    && (sceneName = this.stack[this.stack.length-1]) != this.homeScene){\n                this.stack.pop();\n                let sceneNode = this.content.getChildByName(sceneName);\n                if(sceneNode){\n                    let scene = sceneNode.getComponent(Scene);\n                    if(scene && scene.autoDestroy){\n                        this.content.removeChild(sceneNode);\n                    }\n                }\n            }\n            //从当前场景转换到Home场景\n            this.shiftScene(this.homeScene, shiftAnima).then(resolve).catch(reject);\n        })\n    }\n    //从当前场景转换到目标场景\n    private shiftScene(targetSceneName, shiftAnima){\n        return new Promise((resolve, reject)=>{\n            this.loadScene(targetSceneName).then((newScene:Scene)=>{\n                resolve(newScene);\n                let oldScene = this.curScene;\n                shiftAnima(this.curScene, newScene, ()=>{\n                    if(oldScene && oldScene.autoDestroy){\n                        this.content.removeChild(oldScene.node);\n                        oldScene.node.destroy();\n                    }\n                    this.printState();\n                    this.blockInput.node.active = false;\n                });\n                this.curScene = newScene;\n                DB.Set(\"curScene\", this.curScene);\n            }).catch(()=>{\n                reject();\n                this.blockInput.node.active = false;\n            });\n        });\n    }\n    //获取场景对象，如果有缓存直接使用，没有则新建对象。\n    private loadScene(sceneName:string){\n        return new Promise((reslove, reject)=>{\n            let sceneNode = this.content.getChildByName(sceneName);\n            if(sceneNode){\n                let scene:Scene = sceneNode.getComponent(Scene);\n                reslove(scene);\n            }else{\n                cc.loader.loadRes(\"Scene/\"+sceneName+\"/\"+sceneName, (err, prefab) => {\n                    var newNode:cc.Node = cc.instantiate(prefab);\n                    newNode.name = sceneName;\n                    newNode.position = cc.Vec2.ZERO;\n                    newNode.active = false;\n                    let scene = newNode.getComponent(Scene);\n                    if(scene){\n                        this.content.addChild(scene.node, 0);\n                        reslove(scene);\n                    }else{\n                        reject();\n                    }\n                });\n            }\n        });\n    }\n    private printState(){\n        let str = \"==========SceneManager=========\\nstack: \";\n        for(let i=0; i<this.stack.length; i++){\n            str += \" >> \"+this.stack[i];\n        }\n        str+=\"\\ncache: \";\n        for(let i=0;i<this.content.childrenCount;i++){\n            str += `${i}:${this.content.children[i].name},`;\n        }\n        console.log(str);\n    }\n}\n\n\n\n\nexport namespace ShiftAnima{\n    export function simpleShift(curScene:Scene, newScene:Scene, finish){\n        if(curScene){\n            curScene.node.active = false;\n            console.log(curScene.name +\" false\");\n        }\n        if(newScene){\n            newScene.node.active = true;\n            console.log(newScene.name +\" true\");\n        }\n        finish();\n    }\n    export function moveLeftShift(curScene:Scene, newScene:Scene, finish){\n        if(curScene){\n            curScene.node.position = cc.v2(0, 0);\n            cc.tween(curScene.node).to(0.5, {position: cc.v2(-640, 0)}, { easing: 'quintOut'}).call(()=>{\n                curScene.node.active = false;\n            }).start();\n        }\n        if(newScene){\n            newScene.node.position = cc.v2(640, 0);\n            newScene.node.active = true;\n            cc.tween(newScene.node).to(0.5, {position: cc.v2(0, 0)}, { easing: 'quintOut'}).call(()=>{\n                finish();\n            }).start();\n        }\n    }\n    export function moveRightShift(curScene:Scene, newScene:Scene, finish){\n        if(curScene){\n            curScene.node.position = cc.v2(0, 0);\n            cc.tween(curScene.node).to(0.5, {position: cc.v2(640, 0)}, { easing: 'quintOut'}).call(()=>{\n                curScene.node.active = false;\n            }).start();\n        }\n        if(newScene){\n            newScene.node.position = cc.v2(-640, 0);\n            newScene.node.active = true;\n            cc.tween(newScene.node).to(0.5, {position: cc.v2(0, 0)}, { easing: 'quintOut'}).call(()=>{\n                finish();\n            }).start();\n        }\n    }\n    export function moveUpShift(curScene:Scene, newScene:Scene, finish){\n        if(curScene){\n            curScene.node.position = cc.v2(0, 0);\n            cc.tween(curScene.node).to(0.5, {position: cc.v2(0, -ScreenRect.height)}, { easing: 'quintOut'}).call(()=>{\n                curScene.node.active = false;\n            }).start();\n        }\n        if(newScene){\n            newScene.node.position = cc.v2(0, ScreenRect.height);\n            newScene.node.active = true;\n            cc.tween(newScene.node).to(0.5, {position: cc.v2(0, 0)}, { easing: 'quintOut'}).call(()=>{\n                finish();\n            }).start();\n        }\n    }\n    export function moveDownShift(curScene:Scene, newScene:Scene, finish){\n        if(curScene){\n            curScene.node.position = cc.v2(0, 0);\n            cc.tween(curScene.node).to(0.5, {position: cc.v2(0, ScreenRect.height)}, { easing: 'quintOut'}).call(()=>{\n                curScene.node.active = false;\n            }).start();\n        }\n        if(newScene){\n            newScene.node.position = cc.v2(0, -ScreenRect.height);\n            newScene.node.active = true;\n            cc.tween(newScene.node).to(0.5, {position: cc.v2(0, 0)}, { easing: 'quintOut'}).call(()=>{\n                finish();\n            }).start();\n        }\n    }\n    export function scaleShift(curScene:Scene, newScene:Scene, finish){\n        if(curScene){\n            curScene.node.scale = 1;\n            cc.tween(curScene.node).to(1000,{scale:0}).call(()=>{\n                curScene.node.active = false;\n            });\n        }\n        if(newScene){\n            curScene.node.scale = 0;\n            newScene.node.active = true;\n            cc.tween(newScene.node).delay(1000).to(1000,{scale:1}).call(()=>{\n                finish();\n            });\n        }\n    }\n}"]}